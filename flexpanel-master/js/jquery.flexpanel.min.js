!function(a){"use strict";a.flexpanel=function(b,c){var d={animation:"slide",direction:"right",wrapper:"#wrapper",maxWidth:null,button:".flex-btn"},c=a.extend(d,c),e=a(b),f=c.animation,g=c.direction,h=a(c.wrapper),i=c.maxWidth,j=a(c.button),k="flexpanel",l=a(window).width(),m=(navigator.userAgent.match(/iemobile|android|webos|iphone|ipad|ipod|blackberry|bb10/i)?!0:!1,!1),n=a("body");if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var o=navigator.userAgent;o.match(/MSIE 9.0/i)&&(a("body").addClass("ie9"),m=!0),(o.match(/MSIE 8.0/i)||o.match(/MSIE 7.0/i))&&(a("body").addClass("isIE"),m=!0)}var p={init:function(){a("body").addClass(k+"-"+g+" "+k+"-"+f+" "+k+"-hide"),"reveal"===f?(j.append('<a href="javascript:void(0);"><span class="one"></span><span class="two"></span><span class="three"></span></a>'),j.appendTo(n)):j.append('<a href="javascript:void(0);"><span class="one"></span><span class="two"></span><span class="three"></span></a>'),j.addClass("in-view"),(null===i||i>=l)&&(a("body").removeClass("flexpanel-hide"),e.delay(500).fadeIn(250)),"reveal"===f&&e.addClass("reveal"),a.fn.hammer&&p.touch()},slide:function(b){switch(b){case"open":n.addClass("flexpanel-active"),a(".viewport",e).addClass("smooth");break;case"close":a(".viewport",e).animate({scrollTop:0},500,function(){a(".viewport",e).removeClass("smooth")}),n.removeClass("flexpanel-active"),a(document).on("touchmove",function(){return!0});break;default:n.hasClass("flexpanel-active")?(a(".viewport",e).animate({scrollTop:0},500,function(){a(".viewport",e).removeClass("smooth")}),h.unbind("click"),n.removeClass("flexpanel-active"),a(document).on("touchmove",function(){return!0})):(n.addClass("flexpanel-active"),a(".viewport",e).addClass("smooth"),setTimeout(function(){h.delay(250).unbind("click").bind("click",p.slide)},250))}},touch:function(){j.hammer().bind("swipeleft swiperight",function(b){var c=b.type;switch(g){case"right":"swipeleft"!==c||a("body").hasClass("flexpanel-active")||p.slide(),"swiperight"===c&&a("body").hasClass("flexpanel-active")&&p.slide();break;case"left":"swiperight"!==c||a("body").hasClass("flexpanel-active")||p.slide(),"swipeleft"===c&&a("body").hasClass("flexpanel-active")&&p.slide()}})}};p.init(),j.on("click",function(){p.slide()}),a("ul li a",e).click(function(){var b=a(this),c=b.attr("href");if(b.hasClass("anchor")){p.slide();var d=a(c).offset(),e=d.top;a("html, body").animate({scrollTop:e},500)}}),a(window).resize(function(){l=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,null===i?e.show():l>i?a("body.flexpanel-active")&&(a("body").removeClass("flexpanel-active").addClass("flexpanel-hide"),h.unbind("click")):(e.show(),a("body").removeClass("flexpanel-hide"))});!function(){var a=0;return function(b,c){clearTimeout(a),a=setTimeout(b,c)}}();a(".viewport",e).bind("touchstart",function(){}),a(window).scroll(function(){var b=a(window).scrollTop();100>b&&j.addClass("in-view")}),a(document).on("touchmove",function(a){n.hasClass("flexpanel-active")&&a.preventDefault()}),n.on("touchstart",".viewport",function(a){0===a.currentTarget.scrollTop?a.currentTarget.scrollTop=1:a.currentTarget.scrollHeight===a.currentTarget.scrollTop+a.currentTarget.offsetHeight&&(a.currentTarget.scrollTop-=1)}),n.on("touchmove",".viewport",function(a){a.stopPropagation()}),a(".viewport").bind("mousewheel DOMMouseScroll",function(b){var c=null;"mousewheel"==b.type?c=-1*b.originalEvent.wheelDelta:"DOMMouseScroll"==b.type&&(c=40*b.originalEvent.detail),c&&(b.preventDefault(),a(this).scrollTop(c+a(this).scrollTop()))}),a.fn.flexpanel.toggle=function(){p.slide()},a.fn.flexpanel.open=function(){p.slide("open")},a.fn.flexpanel.close=function(){p.slide("close")}},a.fn.flexpanel=function(b){new a.flexpanel(this,b)}}(jQuery);